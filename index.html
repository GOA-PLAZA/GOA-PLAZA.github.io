<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOA-PLAZA</title>
    <link rel="stylesheet" href="style.css">
    <script src="language.js"></script>

    <!-- ä¿¡æ¯å‘ŠçŸ¥å¼¹çª— -->
    <div class="info-popup" id="commission-popup">
        <!-- æ‹–åŠ¨æŠŠæ‰‹ -->
        <div class="drag-bar popup-drag-bar">
            <!-- å·¦è¾¹ï¼šçª—å£æ ‡é¢˜ -->
            <div class="window-title">COMMISSION_INFO.txt</div>
            <!-- å³è¾¹ï¼šæŒ‰é’®ç»„ -->
            <div class="window-controls">
                <span class="fake-btn minimize">â€”</span>
                <span class="fake-btn maximize">â–¡</span>
                <span class="fake-btn close" onclick="closeCommissionPopup()">Ã—</span>
            </div>
        </div>

        <!-- å¼¹çª—å†…å®¹åŒºåŸŸ -->
        <div class="popup-content">
            <h2 data-i18n="commission-title">å§”æ‰˜ä¿¡æ¯</h2>
            <p data-i18n="commission-paused-msg">ğŸ“¢ ç›®å‰é‚®ç®±å§”æ‰˜æš‚åœ</p>
            <p data-i18n="commission-drop-msg">å¶å°”åœ¨ä»¥ä¸‹åœºæ‰€æ‰è½é›¶ç¢ç¨¿ä»¶ï¼š</p>
            <ul>
                <li data-i18n="commission-place-1">ç±³ç”»å¸ˆ</li>
                <li data-i18n="commission-place-2">QQç¾¤ğŸ§€1049447151</li>
            </ul>

            <!-- å¯ä»¥è‡ªå®šä¹‰ä½ æƒ³æ˜¾ç¤ºçš„å†…å®¹ -->
        </div>
    </div>

    <!-- å…³äºæˆ‘å¼¹çª— -->
    <div class="info-popup" id="about-me-popup">
        <div class="drag-bar popup-drag-bar">
            <div class="window-title">ABOUT-ME.png</div>
            <div class="window-controls">
                <span class="fake-btn minimize">â€”</span>
                <span class="fake-btn maximize">â–¡</span>
                <span class="fake-btn close" onclick="closeAboutMePopup()">Ã—</span>
            </div>
        </div>
        <div class="popup-content">
            <img src="test/ICON/ABOUT-ME.png" style="max-width: 100%; height: auto;">
        </div>
    </div>

    <!-- OCå¼¹çª—é®ç½©å±‚ -->
    <div id="oc-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999;">
    </div>

    <!-- OCå¼¹çª— -->
    <div class="info-popup" id="oc-popup">
        <div class="drag-bar popup-drag-bar">
            <div class="window-title">NOTICE</div>
            <div class="window-controls">
                <span class="fake-btn minimize">â€”</span>
                <span class="fake-btn maximize">â–¡</span>
                <span class="fake-btn close" onclick="closeOCPopup()">Ã—</span>
            </div>
        </div>
        <div class="popup-content oc-popup-content">
            <div class="oc-message">
                <span class="oc-warning">âš ï¸</span>
                <div class="oc-text">
                    <p data-i18n="oc-not-ready">ç›®å‰ï¼Œè¯¥ç«™ç‚¹çš„OCé¡µé¢æš‚æœªåˆ¶ä½œï¼Œ</p>
                    <p data-i18n="oc-notion-prompt">ä½ æ„¿æ„è·³è½¬åˆ°notionåˆ¶ä½œçš„ç®€é™‹ç‰ˆå—ï¼Ÿ</p>
                </div>
            </div>
            <div class="oc-buttons">
                <button class="oc-btn" onclick="goToNotion()" data-i18n="oc-yes">YES</button>
                <button class="oc-btn" onclick="closeOCPopup()" data-i18n="oc-no">NO</button>
            </div>
        </div>
    </div>

    <!-- JavaScript ä»£ç  -->
    <script>
        let popupZIndex = 10000;

        function bringToFront(popupId) {
            const popup = document.getElementById(popupId);
            popupZIndex++;
            popup.style.zIndex = popupZIndex;
        }

        // æ‰“å¼€å§”æ‰˜å¼¹çª—
        function openCommissionPopup() {
            document.getElementById('commission-popup').style.display = 'block';
            bringToFront('commission-popup');
        }

        // å…³é—­å§”æ‰˜å¼¹çª—
        function closeCommissionPopup() {
            document.getElementById('commission-popup').style.display = 'none';
        }

        // æ‰“å¼€å…³äºæˆ‘å¼¹çª—
        function openAboutMePopup() {
            document.getElementById('about-me-popup').style.display = 'block';
            bringToFront('about-me-popup');
        }

        // å…³é—­å…³äºæˆ‘å¼¹çª—
        function closeAboutMePopup() {
            document.getElementById('about-me-popup').style.display = 'none';
        }

        // æ‰“å¼€OCå¼¹çª—
        function openOCPopup() {
            popupZIndex = Math.max(popupZIndex, 11000);

            const commissionPopup = document.getElementById('commission-popup');
            const aboutMePopup = document.getElementById('about-me-popup');
            const petWindow = document.getElementById('draggable-pet');

            if (commissionPopup.style.display !== 'none') {
                commissionPopup.dataset.originalZIndex = commissionPopup.style.zIndex || getComputedStyle(commissionPopup).zIndex;
                commissionPopup.style.zIndex = 5000;
            }
            if (aboutMePopup.style.display !== 'none') {
                aboutMePopup.dataset.originalZIndex = aboutMePopup.style.zIndex || getComputedStyle(aboutMePopup).zIndex;
                aboutMePopup.style.zIndex = 5000;
            }
            if (petWindow.style.display !== 'none') {
                petWindow.dataset.originalZIndex = petWindow.style.zIndex || getComputedStyle(petWindow).zIndex;
                petWindow.style.zIndex = 5000;
            }

            document.getElementById('oc-overlay').style.display = 'block';
            document.getElementById('oc-overlay').style.zIndex = 11000;
            document.getElementById('oc-popup').style.display = 'block';
            popupZIndex++;
            document.getElementById('oc-popup').style.zIndex = popupZIndex;
        }

        // å…³é—­OCå¼¹çª—
        function closeOCPopup() {
            const commissionPopup = document.getElementById('commission-popup');
            const aboutMePopup = document.getElementById('about-me-popup');
            const petWindow = document.getElementById('draggable-pet');

            if (commissionPopup.dataset.originalZIndex) {
                commissionPopup.style.zIndex = commissionPopup.dataset.originalZIndex;
                popupZIndex = Math.max(popupZIndex, parseInt(commissionPopup.dataset.originalZIndex));
            }
            if (aboutMePopup.dataset.originalZIndex) {
                aboutMePopup.style.zIndex = aboutMePopup.dataset.originalZIndex;
                popupZIndex = Math.max(popupZIndex, parseInt(aboutMePopup.dataset.originalZIndex));
            }
            if (petWindow.dataset.originalZIndex) {
                petWindow.style.zIndex = petWindow.dataset.originalZIndex;
                popupZIndex = Math.max(popupZIndex, parseInt(petWindow.dataset.originalZIndex));
            }

            document.getElementById('oc-overlay').style.display = 'none';
            document.getElementById('oc-popup').style.display = 'none';
        }

        // è·³è½¬åˆ°notion
        function goToNotion() {
            window.open('https://goa-plaza.notion.site/goa-plaza/Unspoken-Pledge-9f68573945e4420c8c9e9a0163ac5ce5', '_blank');
            closeOCPopup();
        }

        // å¼¹çª—æ‹–åŠ¨åŠŸèƒ½ï¼ˆä¿®å¤ç‰ˆï¼‰- å§”æ‰˜å¼¹çª—
        (function () {
            const popup = document.getElementById('commission-popup');
            const dragBar = popup.querySelector('.popup-drag-bar');

            let isDragging = false;
            let startX, startY, initialLeft, initialTop;

            dragBar.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('close')) return;

                isDragging = true;
                bringToFront('commission-popup');

                startX = e.clientX;
                startY = e.clientY;

                const rect = popup.getBoundingClientRect();
                initialLeft = rect.left;
                initialTop = rect.top;

                popup.style.transform = 'none';
                popup.style.left = `${initialLeft}px`;
                popup.style.top = `${initialTop}px`;

                dragBar.style.cursor = 'grabbing';
            });

            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;

                e.preventDefault();

                const currentX = e.clientX;
                const currentY = e.clientY;
                const deltaX = currentX - startX;
                const deltaY = currentY - startY;

                popup.style.left = `${initialLeft + deltaX}px`;
                popup.style.top = `${initialTop + deltaY}px`;
            });

            window.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    dragBar.style.cursor = 'move';
                }
            });
        })();

        // å¼¹çª—æ‹–åŠ¨åŠŸèƒ½ï¼ˆä¿®å¤ç‰ˆï¼‰- å…³äºæˆ‘å¼¹çª—
        (function () {
            const popup = document.getElementById('about-me-popup');
            const dragBar = popup.querySelector('.popup-drag-bar');

            let isDragging = false;
            let startX, startY, initialLeft, initialTop;

            dragBar.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('close')) return;

                isDragging = true;
                bringToFront('about-me-popup');

                startX = e.clientX;
                startY = e.clientY;

                const rect = popup.getBoundingClientRect();
                initialLeft = rect.left;
                initialTop = rect.top;

                popup.style.transform = 'none';
                popup.style.left = `${initialLeft}px`;
                popup.style.top = `${initialTop}px`;

                dragBar.style.cursor = 'grabbing';
            });

            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;

                e.preventDefault();

                const currentX = e.clientX;
                const currentY = e.clientY;
                const deltaX = currentX - startX;
                const deltaY = currentY - startY;

                popup.style.left = `${initialLeft + deltaX}px`;
                popup.style.top = `${initialTop + deltaY}px`;
            });

            window.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    dragBar.style.cursor = 'move';
                }
            });
        })();
    </script>

<body>

    <!-- è¿™æ˜¯ä¸»å®¹å™¨ï¼Œç”¨æ¥æŠŠæ‰€æœ‰å†…å®¹å±…ä¸­ -->
    <div class="main-container">

        <nav class="circle-menu">

            <!-- ç¬¬ 1 ä¸ªå°äººï¼šstyle="--i:1" -->
            <a href="javascript:void(0);" onclick="openAboutMePopup()" class="character" style="--i:1">
                <img src="test/HAP.png" class="normal" alt="å°äºº1å¸¸æ€">
                <img src="test/DED.png" class="active" alt="å°äºº1æ‚¬åœ">
                <!-- æ–°å¢æ ‡é¢˜ï¼šæ”¾å¤´é¡¶ -->
                <span class="col-title" data-i18n="about-me">å…³äºæˆ‘</span>
            </a>

            <!-- ç¬¬ 2 ä¸ªå°äººï¼šæ”¹ä¸º style="--i:2" -->
            <a href="javascript:void(0);" onclick="openOCPopup()" class="character" style="--i:2">
                <img src="test/MED.png" class="normal" alt="å°äºº2å¸¸æ€">
                <img src="test/DED.png" class="active" alt="å°äºº2æ‚¬åœ">
                <span class="col-title" data-i18n="oc-world">OCä¸–ç•Œè§‚</span>
            </a>

            <!-- ç¬¬ 3 ä¸ªå°äººï¼šæ”¹ä¸º style="--i:3" -->
            <a href="guestbook.html" class="character" style="--i:3">
                <img src="test/HOLD.png" class="normal" alt="å°äºº3å¸¸æ€">
                <img src="test/DED.png" class="active" alt="å°äºº3æ‚¬åœ">
                <span class="col-title" data-i18n="ask-guestbook">æé—®ç®±&ç•™è¨€æ¿</span>
            </a>

            <!-- ç¬¬ 4 ä¸ªå°äººï¼šæ”¹ä¸º style="--i:4" -->
            <a href="javascript:void(0);" onclick="openCommissionPopup()" class="character" style="--i:4">
                <img src="test/DED.png" class="normal" alt="å°äºº4å¸¸æ€">
                <img src="test/DED.png" class="active" alt="å°äºº4æ‚¬åœ">
                <span class="col-title" data-i18n="commission-paused">å§”æ‰˜ç›¸å…³(æš‚åœä¸­)</span>
            </a>

            <!-- ç¬¬ 5 ä¸ªå°äººï¼šæ”¹ä¸º style="--i:5" -->
            <a href="talk-comics.html" class="character" style="--i:5">
                <img src="test/SAD.png" class="normal" alt="å°äºº5å¸¸æ€">
                <img src="test/DED.png" class="active" alt="å°äºº5æ‚¬åœ">
                <!-- æ–°å¢æ ‡é¢˜ï¼šæ”¾å¤´é¡¶ -->
                <span class="col-title" data-i18n="random-comics">æ‚è°ˆæ¼«ç”»</span>
            </a>

            <div class="center-piece"></div>

            <!-- --- æ–°å¢ï¼šæ­£ä¸­é—´çš„è¿ˆé˜¿å¯†é£æ ¼å›¾ç‰‡ --- -->
            <!-- è®°å¾—æŠŠ src æ”¹æˆä½ è‡ªå·±çš„å›¾ç‰‡è·¯å¾„ -->
            <img src="test/GOA.png" class="center-logo" alt="Central Logo">
        </nav>

    </div>

    <!-- åº•éƒ¨ç¤¾äº¤é“¾æ¥æ  -->
    <div class="footer-dock">

        <!-- é“¾æ¥ 1 -->
        <a href="https://weibo.com/u/5143745410" target="_blank" class="dock-icon">
            <!-- è®°å¾—æŠŠ src æ¢æˆä½ è‡ªå·±çš„å›¾æ ‡è·¯å¾„ -->
            <img src="test\ICON\WEIB.PNG" alt="weibo">
        </a>

        <!-- é“¾æ¥ 2 -->
        <a href="https://www.mihuashi.com/profiles/658935" target="_blank" class="dock-icon">
            <img src="test\ICON\MIH.PNG" alt="mihuashi">
        </a>

        <!-- é“¾æ¥ 3 -->
        <a href="https://space.bilibili.com/492015?spm_id_from=333.874.0.0" target="_blank" class="dock-icon">
            <img src="test\ICON\BILI.PNG" alt="bilibili">
        </a>

    </div>

    <!-- æ¡Œå® å®¹å™¨ -->
    <div class="desk-pet" id="draggable-pet">
        <!-- æ‹–åŠ¨æŠŠæ‰‹ -->
        <div class="drag-bar" id="drag-header">
            <!-- å·¦è¾¹ï¼šçª—å£æ ‡é¢˜ -->
            <div class="window-title">GOA_PET.exe</div>

            <!-- å³è¾¹ï¼šå‡çš„æŒ‰é’®ç»„ -->
            <div class="window-controls">
                <span class="fake-btn minimize">â€”</span>
                <span class="fake-btn maximize">â–¡</span>
                <span class="fake-btn close" onclick="shakePetCloseBtn()">Ã—</span>
            </div>
        </div>
        <!-- ä½ çš„ iframe -->
        <iframe id="pet-iframe" width="314" height="321" scrolling="no"
            src="https://gifypet.neocities.org/pet/pet.html?name=GOA&dob=1766684347&gender=f&element=Air&pet=https%3A%2F%2Fgoaplaza.neocities.org%2FTAMAGOCHI%2FGOACHI.GIF&map=https%3A%2F%2Fgoaplaza.neocities.org%2FTAMAGOCHI%2FBG.GIF&background=&tablecolor=black&textcolor=black"
            frameborder="0"></iframe>
    </div>

    <!-- è¯­è¨€åˆ‡æ¢æŒ‰é’® -->
    <div id="lang-toggle-btn">
        <button id="lang-zh-btn" class="lang-btn" onclick="setLanguage('zh')">ä¸­æ–‡</button>
        <button id="lang-en-btn" class="lang-btn" onclick="setLanguage('en')">EN</button>
    </div>

    <!-- æ¡Œå® çš„ JavaScript ä»£ç  -->
    <script>
        (function () {
            const petWindow = document.getElementById("draggable-pet");
            const dragHeader = document.getElementById("drag-header");
            const iframe = document.getElementById("pet-iframe");
            const closeBtn = petWindow.querySelector('.fake-btn.close');

            let isDragging = false;
            let startX, startY, initialLeft, initialTop;

            closeBtn.addEventListener("click", (e) => {
                e.preventDefault();
                closeBtn.classList.add("shaking");
                setTimeout(() => {
                    closeBtn.classList.remove("shaking");
                }, 600);
            });

            dragHeader.addEventListener("mousedown", (e) => {
                isDragging = true;
                bringToFront('draggable-pet');

                iframe.style.pointerEvents = "none";

                startX = e.clientX;
                startY = e.clientY;

                const rect = petWindow.getBoundingClientRect();
                initialLeft = rect.left;
                initialTop = rect.top;

                dragHeader.style.cursor = "grabbing";
            });

            window.addEventListener("mousemove", (e) => {
                if (!isDragging) return;

                e.preventDefault();

                const currentX = e.clientX;
                const currentY = e.clientY;
                const deltaX = currentX - startX;
                const deltaY = currentY - startY;

                petWindow.style.left = `${initialLeft + deltaX}px`;
                petWindow.style.top = `${initialTop + deltaY}px`;
            });

            window.addEventListener("mouseup", () => {
                if (isDragging) {
                    isDragging = false;
                    dragHeader.style.cursor = "move";

                    iframe.style.pointerEvents = "auto";
                }
            });
        })();
    </script>

    <script>
        initLanguage();
    </script>

</body>

</html>